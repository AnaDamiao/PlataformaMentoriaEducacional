<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Área e Diâmetro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f9;
        }
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none;
            margin: 0;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div id="calculator-card" class="w-full max-w-lg bg-white shadow-2xl rounded-xl p-8 transition-all duration-300">
        <h1 class="text-3xl font-extrabold text-blue-800 mb-6 text-center">
            Calculadora Geométrica
        </h1>

        <div class="mb-6">
            <label for="shapeSelector" class="block text-sm font-medium text-gray-700 mb-2">
                1. Selecione a Figura:
            </label>
            <select id="shapeSelector" onchange="updateInputs()" class="w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 bg-gray-50 text-lg appearance-none cursor-pointer transition duration-150 ease-in-out hover:border-blue-400">
                <option value="circle">Círculo</option>
                <option value="square">Quadrado</option>
                <option value="rectangle">Retângulo</option>
                <option value="triangle">Triângulo</option>
                <option value="trapezoid">Trapézio</option>
            </select>
        </div>

        <div id="dimensions-container" class="mb-6 space-y-4">
        </div>

        <button onclick="calculateShape()" class="w-full py-3 px-4 bg-green-600 text-white font-semibold rounded-lg shadow-md hover:bg-green-700 transition duration-150 ease-in-out transform hover:scale-[1.01] focus:outline-none focus:ring-4 focus:ring-green-500 focus:ring-opacity-50">
            Calcular
        </button>

        <div id="result-area" class="mt-8 p-5 bg-blue-50 border-l-4 border-blue-400 rounded-lg shadow-inner hidden">
            <h2 class="text-xl font-bold text-blue-800 mb-3">
                <span id="result-title">Resultado da Figura</span>
            </h2>
            <p class="text-gray-700 mb-2">
                <span id="result-diameter-label" class="font-semibold">Métrica Característica:</span> 
                <span id="result-diameter" class="font-mono text-lg text-blue-600">0.00</span>
            </p>
            <p class="text-gray-700">
                <span class="font-semibold">Área:</span> 
                <span id="result-area-value" class="font-mono text-lg text-blue-600">0.00</span>
            </p>
        </div>
        
        <div id="error-message" class="mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg hidden" role="alert">
            <p class="font-semibold">Erro:</p>
            <p id="error-text" class="text-sm"></p>
        </div>
    </div>

    <script>
        const shapes = {
            circle: { 
                name: 'Círculo', 
                inputs: [
                    { id: 'radius', label: 'Raio (r)', placeholder: 'Ex: 5' }
                ],
                calculate: (dimensions) => {
                    const r = dimensions.radius;
                    const diameter = 2 * r;
                    const area = Math.PI * r * r;
                    return { 
                        diameterLabel: 'Diâmetro',
                        diameter: diameter, 
                        area: area 
                    };
                }
            },
            square: { 
                name: 'Quadrado', 
                inputs: [
                    { id: 'side', label: 'Lado (l)', placeholder: 'Ex: 10' }
                ],
                calculate: (dimensions) => {
                    const l = dimensions.side;
                    const diagonal = l * Math.sqrt(2);
                    const area = l * l;
                    return { 
                        diameterLabel: 'Diagonal',
                        diameter: diagonal, 
                        area: area 
                    };
                }
            },
            rectangle: { 
                name: 'Retângulo', 
                inputs: [
                    { id: 'width', label: 'Largura (w)', placeholder: 'Ex: 8' },
                    { id: 'height', label: 'Altura (h)', placeholder: 'Ex: 4' }
                ],
                calculate: (dimensions) => {
                    const w = dimensions.width;
                    const h = dimensions.height;
                    const diagonal = Math.sqrt(w * w + h * h);
                    const area = w * h;
                    return { 
                        diameterLabel: 'Diagonal',
                        diameter: diagonal, 
                        area: area 
                    };
                }
            },
            triangle: {
                name: 'Triângulo',
                inputs: [
                    { id: 'sideA', label: 'Lado A', placeholder: 'Ex: 3' },
                    { id: 'sideB', label: 'Lado B', placeholder: 'Ex: 4' },
                    { id: 'sideC', label: 'Lado C', placeholder: 'Ex: 5' }
                ],
                calculate: (dimensions) => {
                    const a = dimensions.sideA;
                    const b = dimensions.sideB;
                    const c = dimensions.sideC;

                    if (a + b <= c || a + c <= b || b + c <= a) {
                        throw new Error("As dimensões não formam um triângulo válido (a soma de dois lados deve ser maior que o terceiro).");
                    }
                    
                    const perimeter = a + b + c;
                    const s = perimeter / 2;
                    const area = Math.sqrt(s * (s - a) * (s - b) * (s - c));

                    return {
                        diameterLabel: 'Perímetro',
                        diameter: perimeter,
                        area: area
                    };
                }
            },
            trapezoid: {
                name: 'Trapézio',
                inputs: [
                    { id: 'baseMajor', label: 'Base Maior (B)', placeholder: 'Ex: 12' },
                    { id: 'baseMinor', label: 'Base Menor (b)', placeholder: 'Ex: 8' },
                    { id: 'height', label: 'Altura (h)', placeholder: 'Ex: 4' }
                ],
                calculate: (dimensions) => {
                    const B = dimensions.baseMajor;
                    const b = dimensions.baseMinor;
                    const h = dimensions.height;

                    if (b > B) throw new Error("A Base Menor (b) deve ser menor ou igual à Base Maior (B).");

                    const area = 0.5 * (B + b) * h;
                    const characteristicLength = B;

                    return {
                        diameterLabel: 'Base Maior',
                        diameter: characteristicLength,
                        area: area
                    };
                }
            }
        };

        function updateInputs() {
            const selector = document.getElementById('shapeSelector');
            const container = document.getElementById('dimensions-container');
            const selectedShape = selector.value;
            const config = shapes[selectedShape];
            
            container.innerHTML = ''; 
            document.getElementById('result-area').classList.add('hidden');
            document.getElementById('error-message').classList.add('hidden');

            const sectionTitle = document.createElement('label');
            sectionTitle.className = 'block text-sm font-medium text-gray-700 mb-2';
            sectionTitle.textContent = '2. Insira as Dimensões:';
            container.appendChild(sectionTitle);

            config.inputs.forEach(input => {
                const inputGroup = document.createElement('div');
                inputGroup.className = 'flex flex-col';

                const label = document.createElement('label');
                label.htmlFor = input.id;
                label.className = 'text-base font-medium text-gray-700 mb-1';
                label.textContent = input.label;

                const inputField = document.createElement('input');
                inputField.type = 'number';
                inputField.id = input.id;
                inputField.placeholder = input.placeholder;
                inputField.className = 'p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 text-lg';
                inputField.min = '0';
                inputField.step = 'any';
                
                inputGroup.appendChild(label);
                inputGroup.appendChild(inputField);
                container.appendChild(inputGroup);
            });
        }

        function calculateShape() {
            const selector = document.getElementById('shapeSelector');
            const selectedShape = selector.value;
            const config = shapes[selectedShape];
            const dimensions = {};

            document.getElementById('error-message').classList.add('hidden');
            document.getElementById('result-area').classList.add('hidden');

            try {
                config.inputs.forEach(input => {
                    const field = document.getElementById(input.id);
                    const value = parseFloat(field.value);

                    if (field.value.trim() === '') {
                        throw new Error(`O campo '${input.label}' não pode estar vazio.`);
                    }
                    if (value <= 0 && selectedShape !== 'circle') {
                         throw new Error(`O valor para '${input.label}' deve ser um número positivo.`);
                    }
                    if (value < 0 && selectedShape === 'circle') {
                         throw new Error(`O Raio não pode ser negativo.`);
                    }
                    
                    dimensions[input.id] = value;
                });
                
                const results = config.calculate(dimensions);

                document.getElementById('result-title').textContent = `Resultado do ${config.name}`;
                document.getElementById('result-diameter-label').textContent = `${results.diameterLabel}:`;
                document.getElementById('result-diameter').textContent = results.diameter.toFixed(2);
                document.getElementById('result-area-value').textContent = results.area.toFixed(2);
                
                document.getElementById('result-area').classList.remove('hidden');

            } catch (error) {
                document.getElementById('error-text').textContent = error.message;
                document.getElementById('error-message').classList.remove('hidden');
            }
        }

        window.onload = updateInputs;
    </script>

</body>
</html>