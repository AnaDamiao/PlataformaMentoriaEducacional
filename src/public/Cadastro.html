<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro - EduMentor</title>
  <link rel="stylesheet" href="./css/Cadastro.css">
<link rel="shortcut icon" href="./Favicon/favicon.EM.jpg" type="image/x-icon">
</head>

<body>
  <!-- Navbar -->
  <header class="navbar">
    <div class="logo"><a href="/">EduMentor</a></div>
    <nav>
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/login" class="btn-login">Entrar</a></li>
      </ul>
    </nav>
  </header>

  <!-- Cadastro -->
  <section class="login">
    <div class="form-card">
      <h2>Crie sua conta</h2>

      <form id="cadastroForm">

        <!-- Nome -->
        <div class="form-group">
          <label for="nome">Nome completo</label>
          <input type="text" id="nome" placeholder="Digite seu nome" required>
        </div>

        <!-- Email -->
        <div class="form-group">
          <label for="email">E-mail</label>
          <input type="email" id="email" placeholder="Digite seu e-mail" required>
        </div>

        <!-- Senha -->
        <div class="form-group">
          <label for="senha">Senha</label>
          <input type="password" id="senha" placeholder="Digite sua senha" required>
        </div>

        <!-- Confirma senha -->
        <div class="form-group">
          <label for="confirma-senha">Confirme sua senha</label>
          <input type="password" id="confirma-senha" placeholder="Confirme sua senha" required>
        </div>

        <!-- Tipo de usuário -->
        <div class="form-group">
          <label class="block">Tipo de usuário</label>

          <div style="display:flex; gap:20px; margin-top:6px;">
            <label style="cursor:pointer;">
              <input class="radio-group__select" type="radio" name="tipo" value="estudante" required>
              <span style="margin-left:4px;">Estudante</span>
            </label>

            <label style="cursor:pointer;">
              <input class="radio-group__select" type="radio" name="tipo" value="mentor" required>
              <span style="margin-left:4px;">Mentor</span>
            </label>
          </div>
        </div>

        <!-- Série Escolar (Estudante) -->
        <div class="form-group hidden" id="serieEscolarGroup">
          <label for="serieEscolar">Série escolar</label>
          <input type="text" id="serieEscolar" placeholder="Ex: 2º ano do ensino médio">
        </div>

        <!-- Disponibilidade (Mentor) -->
        <div class="form-group hidden" id="horarioDisponivelGroup">
          <label>Disponibilidade</label>

          <!-- DIAS DA SEMANA (corrigido para 1 linha) -->
          <div class="dias-grid">
            <label><input type="checkbox" name="diasDisponiveis" value="Segunda"> Seg</label>
            <label><input type="checkbox" name="diasDisponiveis" value="Terça"> Ter</label>
            <label><input type="checkbox" name="diasDisponiveis" value="Quarta"> Qua</label>
            <label><input type="checkbox" name="diasDisponiveis" value="Quinta"> Qui</label>
            <label><input type="checkbox" name="diasDisponiveis" value="Sexta"> Sex</label>
            <label><input type="checkbox" name="diasDisponiveis" value="Sábado"> Sáb</label>
            <label><input type="checkbox" name="diasDisponiveis" value="Domingo"> Dom</label>
          </div>

          <!-- Horários -->
          <div style="display:flex; gap:20px;">
            <div>
              <label for="horaInicio">Início</label>
              <input type="time" id="horaInicio">
            </div>

            <div>
              <label for="horaFim">Término</label>
              <input type="time" id="horaFim">
            </div>
          </div>
        </div>

        <!-- Botão -->
        <button type="submit" class="btn">Continuar para Interesses</button>

      </form>
    </div>
  </section>

  <!-- SCRIPT ORIGINAL -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const tipoRadios = document.querySelectorAll('input[name="tipo"]');
      const serieEscolarGroup = document.getElementById('serieEscolarGroup');
      const horarioDisponivelGroup = document.getElementById('horarioDisponivelGroup');
      const cadastroForm = document.getElementById('cadastroForm');

      function toggleUserFields(tipo) {
        serieEscolarGroup.classList.toggle('hidden', tipo !== 'estudante');
        horarioDisponivelGroup.classList.toggle('hidden', tipo !== 'mentor');
      }

      tipoRadios.forEach(radio => {
        radio.addEventListener('change', (event) => {
          toggleUserFields(event.target.value);
        });
      });
      toggleUserFields('');

      cadastroForm.addEventListener('submit', function(event) {
        event.preventDefault();

        const senha = document.getElementById('senha').value;
        const confirmaSenha = document.getElementById('confirma-senha').value;

        if (senha !== confirmaSenha) {
          alert('As senhas digitadas não coincidem!');
          return;
        }

        const tipo = document.querySelector('input[name="tipo"]:checked')?.value;

        if (!tipo) {
          alert('Por favor, selecione o tipo de usuário.');
          return;
        }

        let userData = {
          nome: document.getElementById('nome').value,
          email: document.getElementById('email').value,
          senha: senha,
          role: tipo
        };

        if (tipo === 'estudante') {
          userData.serieEscolar = document.getElementById('serieEscolar').value;
        } else if (tipo === 'mentor') {
          const diasDisponiveis = Array.from(
            document.querySelectorAll('input[name="diasDisponiveis"]:checked')
          ).map(cb => cb.value);

          userData.disponibilidade = {
            dias: diasDisponiveis,
            horaInicio: document.getElementById('horaInicio').value,
            horaFim: document.getElementById('horaFim').value
          };
        }

        localStorage.setItem('cadastro-parcial', JSON.stringify(userData));
        window.location.href = "/interesse";
      });
    });
  </script>

</body>
</html>
